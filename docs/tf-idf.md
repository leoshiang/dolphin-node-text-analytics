### TF-IDF 演算法

假設有 D 篇文章，每一篇文章經過斷字處理所有文章的詞彙共有 T 個

$$
\begin{matrix}\begin{matrix}\begin{matrix}\\{\rm 詞彙}_1\\{\rm 詞彙}_2\\\begin{matrix}\vdots\\{\rm 詞彙}_T\\\end{matrix}\\\end{matrix}&\begin{matrix}\begin{matrix}{\rm 文件}_1&{\rm 文件}_2&&{\rm 文件}_D\\\end{matrix}\\\left[\begin{matrix}n_{1,1}&n_{1,2}&\cdots&n_{1,D}\\n_{2,1}&n_{2,2}&\cdots&n_{2,D}\\\vdots&\vdots&\vdots&\vdots\\n_{T,1}&n_{T,2}&\cdots&n_{T,D}\\\end{matrix}\right]\\\end{matrix}\\\end{matrix}&\rightarrow&\begin{matrix}\begin{matrix}\\{\rm 詞彙}_1\\{\rm 詞彙}_2\\\begin{matrix}\vdots\\{\rm 詞彙}_T\\\end{matrix}\\\end{matrix}&\begin{matrix}\begin{matrix}{\rm 文件}_1&{\rm 文件}_2&&{\rm 文件}_D\\\end{matrix}\\\left[\begin{matrix}{tf}_{1,1}&{tf}_{1,2}&\cdots&{tf}_{1,D}\\{tf}_{2,1}&{tf}_{2,2}&\cdots&f_{2,D}\\\vdots&\vdots&\vdots&\vdots\\{tf}_{T,1}&{tf}_{T,2}&\cdots&{tf}_{T,D}\\\end{matrix}\right]\\\end{matrix}\\\end{matrix}\\\end{matrix}
$$

| 詞彙                 |         ${文件}_{1}$          |         ${文件}_{2}$          |         ${文件}_{3}$          |         ${文件}_{4}$          |
| -------------------- | :---------------------------: | :---------------------------: | :---------------------------: | :---------------------------: |
| ${詞彙}_{1}=$滷      |         ${n}_{1,1}=1$         |                               |                               |                               |
| ${詞彙}_{2}=$肉      |         ${n}_{2,1}=2$         |               1               |               2               |         ${n}_{2,4}=8$         |
| ${詞彙}_{3}=$飯      |         ${n}_{3,1}=2$         |               2               |               1               |         ${n}_{3,4}=3$         |
| ${詞彙}_{4}=$不      |         ${n}_{4,1}=6$         |               5               |               6               |         ${n}_{4,4}=4$         |
| ${詞彙}_{5}=$符合    |         ${n}_{5,1}=1$         |               1               |                               |                               |
| ${詞彙}_{6}=$期待    |         ${n}_{6,1}=1$         |                               |                               |                               |
| ${詞彙}_{7}=$偏      |         ${n}_{7,1}=1$         |                               |               1               |         ${n}_{7,4}=1$         |
| ${詞彙}_{8}=$乾      |         ${n}_{8,1}=1$         |                               |               2               |         ${n}_{8,4}=1$         |
| ${詞彙}_{9}=$其他    |         ${n}_{9,1}=1$         |               2               |               4               |                               |
| ${詞彙}_{10}=$還不錯 |        ${n}_{10,1}=1$         |                               |               2               |        ${n}_{10,4}=1$         |
| ${詞彙}_{11}=$個人   |        ${n}_{11,1}=3$         |               1               |                               |                               |
| ${詞彙}_{12}=$享用   |        ${n}_{12,1}=1$         |               1               |                               |                               |
|                      | ${\sum_{k=1}^{12}n_{k,1}}=21$ | ${\sum_{k=1}^{12}n_{k,2}}=13$ | ${\sum_{k=1}^{12}n_{k,3}}=18$ | ${\sum_{k=1}^{12}n_{k,4}}=18$ |


$$
{tf}_{t,d}={\frac{n_{t,d}}{\sum_{k=1}^{T}n_{k,d}}}
$$

$$
{tf}_{1,1} = {\frac{{詞彙}_{1}在{文件}_{1}出現的次數}{{文件}_{1}中所有詞出現次數的總和}}
$$


| 詞彙                   |           ${文件}_{1}$            | ${文件}_{2}$ | ${文件}_{3}$ |           ${文件}_{4}$           |
| ---------------------- | :-------------------------------: | :----------: | :----------: | :------------------------------: |
| $${詞彙}_{1}=滷$$      | ${tf}_{1,1}=\frac{1}{21}=0.0476$  |              |              |                                  |
| $${詞彙}_{2}=肉$$      | ${tf}_{2,1}=\frac{2}{21}=0.0952$  |              |              | ${tf}_{1,4}=\frac{8}{18}=0.4444$ |
| $${詞彙}_{3}=飯$$      | ${tf}_{3,1}=\frac{2}{21}=0.0952$  |              |              | ${tf}_{2,4}=\frac{3}{18}=0.1666$ |
| $${詞彙}_{4}=不$$      | ${tf}_{4,1}=\frac{6}{21}=0.2857$  |              |              | ${tf}_{3,4}=\frac{4}{18}=0.2222$ |
| $${詞彙}_{5}=符合$$    | ${tf}_{5,1}=\frac{1}{21}=0.0476$  |              |              |                                  |
| $${詞彙}_{6}=期待$$    | ${tf}_{6,1}=\frac{1}{21}=0.0476$  |              |              |                                  |
| $${詞彙}_{7}=偏$$      | ${tf}_{7,1}=\frac{1}{21}=0.0476$  |              |              | ${tf}_{7,4}=\frac{1}{18}=0.0555$ |
| $${詞彙}_{8}=乾$$      | ${tf}_{8,1}=\frac{1}{21}=0.0476$  |              |              | ${tf}_{7,4}=\frac{1}{18}=0.0555$ |
| $${詞彙}_{9}=其他$$    | ${tf}_{9,1}=\frac{1}{21}=0.0476$  |              |              |                                  |
| $${詞彙}_{10}=還不錯$$ | ${tf}_{10,1}=\frac{1}{21}=0.0476$ |              |              | ${tf}_{7,4}=\frac{1}{18}=0.0555$ |
| $${詞彙}_{11}=個人$$   | ${tf}_{11,1}=\frac{3}{21}=0.1428$ |              |              |                                  |
| $${詞彙}_{12}=享用$$   | ${tf}_{12,1}=\frac{1}{21}=0.0476$ |              |              |                                  |

$$
{idf}_t=log\left(\frac{文章總數}{詞彙_t出現過的文章篇數}\right)
$$

| 詞彙                   | ${idf}_t=log\left(\frac{D}{d_t}\right)$             |
| ---------------------- | :-------------------------------------------------- |
| $${詞彙}_{1}=滷$$      | ${idf}_1=log\left(\frac{4}{1}\right)=0.60205999$    |
| $${詞彙}_{2}=肉$$      | ${idf}_2=log\left(\frac{4}{4}\right)=0$             |
| $${詞彙}_{3}=飯$$      | ${idf}_3=log\left(\frac{4}{4}\right)=0$             |
| $${詞彙}_{4}=不$$      | ${idf}_4=log\left(\frac{4}{4}\right)=0$             |
| $${詞彙}_{5}=符合$$    | ${idf}_5=log\left(\frac{4}{2}\right)=0.30103$       |
| $${詞彙}_{6}=期待$$    | ${idf}_6=log\left(\frac{4}{1}\right)=0.60205999$    |
| $${詞彙}_{7}=偏$$      | ${idf}_7=log\left(\frac{4}{3}\right)=0.12493874$    |
| $${詞彙}_{8}=乾$$      | ${idf}_8=log\left(\frac{4}{3}\right)=0.12493874$    |
| $${詞彙}_{9}=其他$$    | ${idf}_9=log\left(\frac{4}{3}\right)=0.12493874$    |
| $${詞彙}_{10}=還不錯$$ | ${idf}_{10}=log\left(\frac{4}{3}\right)=0.12493874$ |
| $${詞彙}_{11}=個人$$   | ${idf}_{11}=log\left(\frac{4}{2}\right)=0.30103$    |
| $${詞彙}_{12}=享用$$   | ${idf}_{12}=log\left(\frac{4}{2}\right)=0.30103$    |

